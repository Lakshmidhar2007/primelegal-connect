{
  "entities": {
    "UserAccount": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserAccount",
      "type": "object",
      "description": "Represents a user account within the PRIMELEGAL CONNECT application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user account."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user account.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the user."
        },
        "isLawyer": {
          "type": "boolean",
          "description": "Indicates whether the user is a lawyer or not."
        },
        "registrationDate": {
          "type": "string",
          "description": "Date and time the user registered.",
          "format": "date-time"
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "isLawyer",
        "registrationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserAccount",
          "schema": {
            "$ref": "#/backend/entities/UserAccount"
          },
          "description": "Stores user account information. Uses path-based ownership for access control, ensuring only the user can access their data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user.  This is also the Firebase Authentication UID."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to primarily support user authentication and account management.  It leverages path-based ownership for user accounts to ensure data privacy and security. This approach simplifies security rules, allowing direct enforcement of access control based on the user's ID. This design prioritizes Authorization Independence, eliminating the need for `get()` calls in security rules, enabling atomic operations.  The structure avoids mixing data with different access needs within the same collections (Structural Segregation)."
  }
}
